{% extends 'base.html' %}
{% load static %}

{% block title %}MİZAÇLAR | 4 Temel Mizaç{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'css/temperaments.css' %}">
{% endblock %}

{% block content %}
<!-- Mizac Bölümü -->
<section class="temperaments-overview">
  <div class="container">
    <h2 class="section-title">Mizaç Nedir?</h2>
    <p class="section-description">
      Temel mizaç tiplerinden hangisine sahip olduğunuzu keşfetmek için kartlara tıklayın.
    </p>
    
    {% if has_test_result %}
    <div class="user-temperament-info">
      <p>Mizaç testinizin sonucunda baskın mizacınız: <strong>{{ user_element.name }}</strong></p>
      <div class="temperament-actions">
        <a href="{% url 'my_temperament' %}" class="btn btn-accent">Mizacımı Görüntüle</a>
        <a href="{% url 'my_suggestions' %}" class="btn btn-primary">Önerilerime Git</a>
      </div>
    </div>
    {% elif request.user.is_authenticated and not has_test_result %}
    <div class="test-invitation">
      <p>Henüz mizaç testini çözmemişsiniz. Kendi mizaç tipinizi öğrenmek için hemen testi çözün!</p>
      <a href="{% url 'test_list' %}" class="btn btn-primary">Teste Başla</a>
    </div>
    {% else %}
    <div class="login-invitation">
      <p>Kendi mizaç tipinizi öğrenmek ve kişiselleştirilmiş öneriler almak için üye olun ve ücretsiz testi çözün.</p>
      <div class="login-actions">
        <a href="{% url 'login' %}" class="btn btn-primary">Giriş Yap</a>
        <a href="{% url 'register' %}" class="btn btn-secondary">Kayıt Ol</a>
      </div>
    </div>
    {% endif %}
    
    <div class="flip-cards">
      <!-- Ateş Kartı -->
      <div class="flip-card">
        <div class="flip-card-inner">
          <div class="flip-card-front">
            <div class="card-circle fire">
              <i class="fas fa-fire"></i>
            </div>
            <h3>Ateş</h3>
          </div>
          <div class="flip-card-back">
            <h3>Ateş</h3>
            <p>Enerjik, tutkulu, lider ruhlu.</p>
            <a href="{% url 'fire_more' %}" class="card-link">
              Daha Fazlası <i class="fas fa-arrow-right"></i>
            </a>
          </div>
        </div>
      </div>
      
      <!-- Hava Kartı -->
      <div class="flip-card">
        <div class="flip-card-inner">
          <div class="flip-card-front">
            <div class="card-circle air">
              <i class="fas fa-wind"></i>
            </div>
            <h3>Hava</h3>
          </div>
          <div class="flip-card-back">
            <h3>Hava</h3>
            <p>İletişim, analitik, sosyal.</p>
            <a href="{% url 'air_more' %}" class="card-link">
              Daha Fazlası <i class="fas fa-arrow-right"></i>
            </a>
          </div>
        </div>
      </div>
      
      <!-- Su Kartı -->
      <div class="flip-card">
        <div class="flip-card-inner">
          <div class="flip-card-front">
            <div class="card-circle water">
              <i class="fas fa-water"></i>
            </div>
            <h3>Su</h3>
          </div>
          <div class="flip-card-back">
            <h3>Su</h3>
            <p>Duygusal, empatik, sakin.</p>
            <a href="{% url 'water_more' %}" class="card-link">
              Daha Fazlası <i class="fas fa-arrow-right"></i>
            </a>
          </div>
        </div>
      </div>
      
      <!-- Toprak Kartı -->
      <div class="flip-card">
        <div class="flip-card-inner">
          <div class="flip-card-front">
            <div class="card-circle earth">
              <i class="fas fa-mountain"></i>
            </div>
            <h3>Toprak</h3>
          </div>
          <div class="flip-card-back">
            <h3>Toprak</h3>
            <p>Güvenilir, sabırlı, disiplinli.</p>
            <a href="{% url 'earth_more' %}" class="card-link">
              Daha Fazlası <i class="fas fa-arrow-right"></i>
            </a>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>
{% endblock %}

{% block extra_js %}
<script>
  document.addEventListener('DOMContentLoaded', function() {
    // Intersection Observer: flip kartlar görünür olduğunda animasyon ekle
    const observer = new IntersectionObserver((entries) => {
      entries.forEach(entry => {
        if (entry.isIntersecting) {
          entry.target.classList.add('appear');
        }
      });
    }, { threshold: 0.1 });
    
    document.querySelectorAll('.flip-card').forEach(el => {
      observer.observe(el);
    });
  });
</script>
{% endblock %}